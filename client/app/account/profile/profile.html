<div class="container profileView">
  <div class="row">

    <div class="d-none d-lg-block col-lg-4">
      <ul class="nav navbar-nav flex-column">
        <li class="nav-item" ng-repeat="item in vm.menu" ng-class="{active: item === vm.itemSelected}"
            ng-hide="item.route === 'submitted_projects' && !(vm.user.personType.Description === 'FormerStudentAndProfessor' || vm.user.personType.Description === 'Professor' || vm.user.personType.Description === 'Student')">
          <a class="nav-link" ng-click="vm.selectPage(item.route)" href="#">{{item.name}}</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" ng-click="vm.logoutUser()">Sair</a>
        </li>
      </ul>
    </div>

    <!-- My profile -->
    <ul class="nav navbar-nav flex-column w-100 mb-2 mt-3 d-block d-lg-none">
      <li class="nav-item" ng-class="{active: vm.itemSelected.route === 'me'}">
        <a class="nav-link" ng-click="vm.selectPage('me')" href="#">Meus dados</a>
      </li>
    </ul>
    <div class="col-12 col-lg-8" ng-if="vm.itemSelected.route === 'me'" id="myProfile">

      <!-- Show profile -->
      <div class="" ng-if="!vm.editFields">

        <div class="row p-0">
          <div class="col-auto c-pointer" ng-click="vm.updatePhoto()">
            <img class="profile-photo pb-2" ng-src="{{vm.user.ImageURL || 'assets/images/profile.svg'}}" alt="{{vm.user.name}}"
                 uib-tooltip="Alterar foto" tooltip-placement="bottom">
          </div>
          <div class="col-auto">
            <h1>{{vm.user.name}}</h1>
            <p class="legend"
               ng-if="vm.user.personType.Description === 'FormerStudent' || vm.user.personType.Description === 'Student' || vm.user.personType.Description === 'DropStudent'">
              {{vm.user.Headline}}
              <br>
              {{vm.user.engineering.Description}} | {{vm.user.personType.PortugueseDescription | lowercase}}
              <br>
              Formatura {{vm.user.GraduationYear}}
            </p>
            <p class="legend" ng-if="vm.user.personType.Description === 'Professor'">
              {{vm.user.Headline}}
              <br>
              {{vm.user.se.Description}} | {{vm.user.personType.PortugueseDescription | lowercase}}
            </p>
            <p class="legend" ng-if="vm.user.personType.Description === 'Visitor'">
              {{vm.user.Headline}}
              <br>
              {{vm.user.personType.PortugueseDescription}}
            </p>
            <p class="legend" ng-if="vm.user.personType.Description === 'FormerStudentAndProfessor'">
              {{vm.user.Headline}}
              <br>
              {{vm.user.se.Description}}
              <br>
              {{vm.user.engineering.Description}} | {{vm.user.personType.PortugueseDescription | lowercase}}
              <br>
              Formatura {{vm.user.GraduationYear}}
            </p>

            <p class="legend text-warning" ng-if="!vm.user.IsApproved">Cadastro em validação</p>
            <p class="legend text-success" ng-if="vm.user.IsApproved">Usuário validado</p>
          </div>
        </div>

        <div class="row">

          <div class="col-12 col-sm-6">
            <div class="form-group">
              <label for="emailShow">EMAIL</label>
              <input type="text" id="emailShow" name="email" class="form-control-plaintext" readonly
                     ng-model="vm.user.email">
            </div>
            <div class="form-group">
              <label for="BirthdateShow">DATA DE NASCIMENTO</label>
              <input type="text" id="BirthdateShow" name="Birthdate" class="form-control-plaintext" readonly
                     value="{{vm.user.Birthdate | date:'dd/MM/yyyy'}}">
            </div>
            <div class="form-group">
              <label for="PhoneShow">TELEFONE</label>
              <!-- International phone -->
              <input type="text" id="PhoneShow" name="Phone" class="form-control-plaintext" readonly
                     ng-model="vm.user.Phone" ng-if="vm.user.Phone.indexOf('+55') === -1" ng-intl-tel-input>
              <!-- National phone -->
              <input type="text" id="PhoneShow" name="Phone" class="form-control-plaintext" readonly
                     ng-model="vm.user.Phone" ng-if="vm.user.Phone.indexOf('+55') > -1" mask="+99 (99) 9?9999-9999" ng-intl-tel-input>
            </div>
            <div class="form-group">
              <label for="LocationShow">LOCALIZAÇÃO</label>
              <input type="text" id="LocationShow" name="Location" class="form-control-plaintext" readonly
                     ng-value="vm.locationName">
            </div>
            <div class="form-group mb-0" ng-if="vm.user.personType.Description !== 'Visitor'">
              <label for="InitiativesShow">
                {{vm.user.personType.Description === 'FormerStudent' ? 'TEVE ' : 'TEM (OU TEVE)'}}
                LIGAÇÃO COM ALGUMA INICIATIVA OU PROJETO?</label>
              <input type="text" id="InitiativesShow" name="Initiatives" class="form-control-plaintext" readonly
                     ng-value="vm.concatenateInitiativeLinks()">
            </div>
          </div>

          <div class="col-12 col-sm-6" ng-if="vm.hasPosition">
            <!--
            <div class="form-group">
              <label for="GenreShow">GÊNERO</label>
              <input type="text" id="GenreShow" name="Genre" class="form-control-plaintext" readonly
                     value="{{vm.user.Genre === 'M' ? 'Masculino' :  (vm.user.Genre === 'F' ? 'Feminino' : 'Outro')}}">
            </div>
            -->
            <div class="form-group">
              <label for="LevelType">MEIO DE ATUAÇÃO</label>
              <input type="text" id="LevelType" name="LevelType" class="form-control-plaintext" readonly
                     ng-if="vm.user.positions[0].level.Type === 'civil'"
                     value="Civil">
              <input type="text" name="LevelType" class="form-control-plaintext" readonly
                     ng-if="vm.user.positions[0].level.Type === 'military'"
                     value="Militar">
            </div>
            <div class="form-group">
              <label for="Position">CARGO ATUAL</label>
              <input type="text" id="Position" name="Position" class="form-control-plaintext" readonly
                     ng-value="vm.user.positions[0].Title">
            </div>
            <div class="form-group">
              <label for="Level" ng-if="vm.user.positions[0].level.Type === 'civil'">NÍVEL DO CARGO</label>
              <label for="Level" ng-if="vm.user.positions[0].level.Type === 'military'">PATENTE</label>
              <input type="text" id="Level" name="Level" class="form-control-plaintext" readonly
                     ng-value="vm.user.positions[0].level.Description !== 'Outro' ? vm.user.positions[0].level.Description : vm.user.positions[0].LevelOther">
              </div>
            <div class="form-group">
              <label for="Company">EMPRESA</label>
              <input type="text" id="Company" name="Company" class="form-control-plaintext" readonly
                     ng-value="vm.user.positions[0].company.Name">
            </div>
          </div>

        </div>

        <p class="help-block text-success mt-0 mb-4">
          {{ vm.messageUpdate }}
        </p>

        <button class="btn btn-outline-danger" ng-click="vm.callEdit()">
          ALTERAR CADASTRO
        </button>

        <br>

      </div>

      <!-- Edit profile -->
      <div ng-if="vm.editFields">

        <h4 class="mb-4">Edição de dados</h4>

        <form class="form" name="formUpdate" ng-submit="vm.saveUser(formUpdate)" novalidate>
          <div class="row">

            <div class="col-12 col-sm-6">

              <div class="form-group">
                <label for="name">NOME DE EXIBIÇÃO*</label>
                <input type="text" id="name" name="name" class="form-control" placeholder="nome para exibição no perfil"
                       uib-tooltip="Seu nome de exibição será público." tooltip-placement="bottom"
                       ng-model="vm.user.name" required>
                <p class="help-block" ng-show="formUpdate.name.$error.required && vm.submittedUpdate">
                  Insira seu nome.
                </p>
              </div>

              <div class="form-group">
                <label for="FullName">NOME COMPLETO*</label>
                <input type="text" name="FullName" id="FullName" class="form-control" placeholder="nome para validação"
                       uib-tooltip="O nome completo facilitará a aprovação do seu cadastro." tooltip-placement="bottom"
                       ng-model="vm.user.FullName" required ng-disabled="vm.user.IsApproved">
                <p class="help-block" ng-show="formUpdate.FullName.$error.required && vm.submittedUpdate">
                  Insira seu nome completo.
                </p>
              </div>

              <div class="form-group">
                <label for="email">EMAIL*</label>
                <input type="text" id="email" name="email" class="form-control" ng-model="vm.user.email" required>
                <p class="help-block" ng-show="formUpdate.email.$error.required && vm.submittedUpdate">
                  Por favor, insira seu email.
                </p>
                <p class="help-block" ng-show="formUpdate.email.$error.email && vm.submittedUpdate">
                  Por favor, insira um email válido.
                </p>
              </div>

              <div class="form-group">
                <label for="Birthdate">DATA DE NASCIMENTO</label>
                <input type="text" id="Birthdate" name="Birthdate" placeholder="dd/mm/yyyy" mask="39/19/9999"
                       class="form-control" ng-model="vm.Birthdate"
                       ng-change="vm.dateInvalid = vm.Util.invalidPastDate(vm.Birthdate)">
                <p class="help-block" ng-show="formUpdate.Birthdate.$error.required && vm.submittedUpdate">
                  Insira a sua data de nascimento.
                </p>
                <p class="help-block" ng-show="((formUpdate.Birthdate.$invalid || vm.dateInvalid) && vm.submittedUpdate)">
                  Insira uma data válida.
                </p>
              </div>

              <div class="form-group">
                <label for="Phone">TELEFONE</label>
                <input type="tel" id="Phone" name="Phone" ng-intl-tel-input
                class="form-control ml-5" ng-model="vm.user.Phone">
                <p class="help-block" ng-show="formUpdate.Phone.$invalid && vm.submittedUpdate">
                  Insira um telefone válido.
                </p>
              </div>

              <div class="form-group">
                <label for="PersonTypeId">QUAL SUA RELAÇÃO COM O IME HOJE?*</label>
                <select class="form-control" id="PersonTypeId" name="PersonTypeId" ng-model="vm.user.PersonTypeId"
                        uib-tooltip="Ao modificar sua relação com o IME, seu perfil será validado novamente pela Alumni IME."
                        tooltip-placement="bottom" required ng-change="vm.updatePersonType(vm.user.PersonTypeId)">
                  <option ng-repeat="type in vm.personTypes" ng-if="type.Description !== 'NewUser'"
                          ng-value="type.PersonTypeId">{{type.PortugueseDescription}}
                  </option>
                </select>
                <p class="help-block" ng-show="formUpdate.PersonTypeId.$error.required && vm.submittedUpdate">
                  Escolha uma opção.
                </p>
              </div>

              <div class="form-group" ng-if="vm.user.personType.Description === 'Visitor'">
                <label>COMO VOCÊ CONHECEU A PÁGINA?*</label>
                <div class="custom-control custom-radio" ng-repeat="option in vm.optionsToKnowList">
                  <input type="radio" id="customRadio{{$index}}" name="OptionToKnowThePage" class="custom-control-input"
                         ng-value="option.OptionTypeId" ng-model="vm.user.OptionToKnowThePageId" required>
                  <label class="custom-control-label" for="customRadio{{$index}}">{{option.Description}}</label>
                  <div class="form-group"
                       ng-if="option.Description === 'Outros' && vm.user.OptionToKnowThePageId == option.OptionTypeId">
                    <input type="text" id="OptionToKnowThePageOther" name="OptionToKnowThePageOther"
                           class="form-control"
                           ng-model="vm.user.OptionToKnowThePageOther" required>
                    <p class="help-block"
                       ng-show="formUpdate.OptionToKnowThePageOther.$error.required && vm.submittedUpdate">
                      Insira outra opção.
                    </p>
                  </div>
                </div>
                <p class="help-block" ng-show="formUpdate.OptionToKnowThePage.$error.required && vm.submittedUpdate">
                  Escolha uma opção.
                </p>
              </div>

              <div class="form-group" ng-if="vm.user.personType.Description !== 'Visitor'">
                <label>{{vm.user.personType.Description === 'FormerStudent' ? 'TEVE ' : 'TEM (OU TEVE)'}}
                  LIGAÇÃO COM ALGUMA INICIATIVA OU PROJETO?</label>
                <div class="custom-control custom-checkbox" ng-repeat="initiative in vm.initiativeList">
                  <input type="checkbox" class="custom-control-input" id="customCheck{{$index}}"
                         ng-model="initiative.selected">
                  <label class="custom-control-label" for="customCheck{{$index}}">{{initiative.Description}}</label>
                  <div class="form-group"
                       ng-if="initiative.Description === 'Outros' && vm.userHasInitiative(initiative.InitiativeId)">
                    <input type="text" id="InitiativeLinkOther" name="InitiativeLinkOther"
                           class="form-control"
                           ng-model="vm.user.InitiativeLinkOther" required>
                    <p class="help-block"
                       ng-show="formUpdate.InitiativeLinkOther.$error.required && vm.submittedUpdate">
                      Insira outra opção.
                    </p>
                  </div>
                </div>
              </div>
              <br>

              <div class="custom-control custom-checkbox" ng-if="vm.user.personType.Description === 'FormerStudent' || vm.user.personType.Description === 'FormerStudentAndProfessor'">
                <input type="checkbox" name="ShowInformation" class="custom-control-input" id="ShowInformation" ng-model="vm.user.ShowInformation">
                <label class="custom-control-label" for="ShowInformation">
                  Autorizo outros ex-alunos aprovados na plataforma a visualizarem meus dados.
                </label>
              </div>              

            </div>

            <div class="col-12 col-sm-6">

              <!--
              <div class="form-group">
                <label for="Genre">GÊNERO*</label>
                <select class="form-control" id="Genre" name="Genre" ng-model="vm.user.Genre" required>
                  <option value="M">Masculino</option>
                  <option value="F">Feminino</option>
                  <option value="O">Outro</option>
                </select>
                <p class="help-block" ng-show="formUpdate.Genre.$error.required && vm.submittedUpdate">
                  Insira o seu gênero.
                </p>
              </div>
              -->

              <div class="form-group"
                   ng-if="vm.user.personType.Description !== 'Visitor' && vm.user.personType.Description !== 'Professor'">
                <label for="GraduationYear">ANO DE FORMAÇÃO*</label>
                <select class="form-control" id="GraduationYear" name="GraduationYear" ng-model="vm.user.GraduationYear"
                        required>
                  <option ng-repeat="year in vm.graduationYears | orderBy:'-'" ng-value="year">{{year}}</option>
                </select>
                <p class="help-block" ng-if="formUpdate.GraduationYear.$error.required && vm.submittedUpdate">
                  Insira o seu ano de formação.
                </p>
              </div>

              <div class="form-group"
                   ng-if="vm.user.personType.Description !== 'Visitor' && vm.user.personType.Description !== 'Professor'">
                <label for="GraduationEngineeringId">ENGENHARIA*</label>
                <select class="form-control" id="GraduationEngineeringId" name="GraduationEngineeringId"
                        ng-model="vm.user.GraduationEngineeringId" required
                        ng-change="vm.updateEngineering(vm.user.GraduationEngineeringId)">
                  <option ng-repeat="engineering in vm.engineeringList | orderBy:'Description'"
                          ng-value="engineering.EngineeringId">{{engineering.Description}}
                  </option>
                </select>
                <p class="help-block" ng-if="formUpdate.GraduationEngineeringId.$error.required && vm.submittedUpdate">
                  Insira a sua engenharia.
                </p>
              </div>

              <div class="form-group"
                   ng-if="vm.user.personType.Description === 'Professor' || vm.user.personType.Description === 'FormerStudentAndProfessor'">
                <label for="ProfessorSEId">SEÇÃO DE ENSINO ATUAL*</label>
                <select class="form-control" id="ProfessorSEId" name="ProfessorSEId"
                        ng-model="vm.user.ProfessorSEId" required ng-change="vm.updateSe(vm.user.ProfessorSEId)">
                  <option ng-repeat="se in vm.sesList" ng-value="se.SEId">{{se.Description}}
                  </option>
                </select>
                <p class="help-block" ng-if="formUpdate.ProfessorSEId.$error.required && vm.submittedUpdate">
                  Insira a sua seção de ensino.
                </p>
              </div>

              <br>
              <div class="form-group">
                <label for="Headline">TÍTULO DO PERFIL</label>
                <textarea type="text" id="Headline" name="Headline" class="form-control headline" rows="3"
                          placeholder="Ex: Especialista em Gestão de Projetos"
                          ng-model="vm.user.Headline" ng-maxlength="255"></textarea>
                <p class="help-block" ng-show="formUpdate.Headline.$error.required && vm.submittedUpdate">
                  Insira um título para seu perfil.
                </p>
                <p class="help-block" ng-show="formUpdate.Headline.$error.maxlength">
                  Título muito longo.
                </p>
              </div>

              <div class="form-group">
                <label for="Industry">SETOR</label>
                <select class="form-control" id="Industry" name="Industry"
                        ng-model="vm.user.IndustryId">
                  <option ng-repeat="industry in vm.industriesList"
                          ng-value="industry.IndustryId">{{industry.PortugueseDescription}}
                  </option>
                </select>
                <p class="help-block" ng-if="formUpdate.IndustryId.$error.required && vm.submittedUpdate">
                  Insira o seu setor.
                </p>
              </div>

              <div class="row p-0">
                <div class="col" ng-class="{'col-8': vm.user.location.CountryId === 1}">
                  <div class="form-group">
                    <label for="Country">PAÍS</label>
                    <select class="form-control" id="Country" name="Country"
                            ng-model="vm.user.location.CountryId">
                      <option ng-repeat="country in vm.countriesList" ng-value="country.CountryId">
                        {{country.Description}}
                      </option>
                    </select>
                    <p class="help-block" ng-if="formUpdate.Country.$error.required && vm.submittedUpdate">
                      Insira o seu país.
                    </p>
                  </div>
                </div>

                <div class="col-4" ng-if="vm.user.location.CountryId === 1">
                  <div class="form-group">
                    <label for="State">ESTADO</label>
                    <select class="form-control" id="State" name="State" ng-change="vm.selectState(vm.user.location.StateId)"
                            ng-model="vm.user.location.StateId">
                      <option ng-repeat="state in vm.statesList" ng-value="state.StateId">
                        {{state.Code}}
                      </option>
                    </select>
                    <p class="help-block" ng-if="formUpdate.State.$error.required && vm.submittedUpdate">
                      Insira o seu estado.
                    </p>
                  </div>
                </div>
              </div>

              <div class="form-group" ng-if="vm.user.location.CountryId === 1">
                <label for="City">CIDADE</label>
                <select class="form-control" id="City" name="City" ng-change="vm.selectCity(vm.user.location.city.IBGEId)"
                        ng-model="vm.user.location.city.IBGEId">
                  <option ng-repeat="city in vm.citiesList" ng-value="city.IBGEId">
                    {{city.Description}}
                  </option>
                </select>
                <p class="help-block" ng-if="formUpdate.City.$error.required && vm.submittedUpdate">
                  Insira a sua cidade.
                </p>
              </div>

              <a class="btn btn-outline-dark add-position mt-5 mx-auto" href="#" ng-click="vm.hasPosition = !vm.hasPosition"
                 ng-if="!vm.hasPosition">
                  ADICIONAR CARGO ATUAL
              </a>
     
              <!-- Current position -->
              <div ng-if="vm.hasPosition">
                <h5 class="modal-title text-center modal-title mb-3 mt-4">
                  Cargo atual
                  <!-- <i class="fa fa-trash c-pointer ml-3" ng-click="vm.hasPosition = !vm.hasPosition"
                      uib-tooltip="Remover cargo" tooltip-placement="bottom"
                      ng-if="vm.user.personType.Description === 'Student' || vm.user.personType.Description === 'DropStudent'">
                  </i> -->
                </h5>
        
                <div class="form-group">
                  <label for="PositionTitle">TÍTULO DO CARGO*</label>
                  <input type="text" name="PositionTitle" id="PositionTitle" class="form-control"
                          placeholder="Ex: Gerente Comercial, Chefe da 1ª Seção"
                          ng-model="vm.user.positions[0].Title" required>
                  <p class="help-block" ng-show="formUpdate.PositionTitle.$error.required && vm.submittedUpdate">
                    Insira o título do cargo.
                  </p>
                </div>
        
                <div class="row p-0">
                  <div class="col-5">
                    <div class="form-group">
                      <label for="LevelType">MEIO DE ATUAÇÃO*</label>
                      <select class="form-control" id="LevelType" name="LevelType" ng-model="vm.levelType" required>
                        <option value="civil">Civil</option>
                        <option value="military">Militar</option>
                      </select>
                      <p class="help-block" ng-show="formUpdate.LevelType.$error.required && vm.submittedUpdate">
                        Insira o meio de atuação do cargo.
                      </p>
                    </div>
                  </div>
        
                  <div class="col-7">
                    <div class="form-group">
                      <label for="Level" ng-if="vm.levelType === 'civil' || !vm.levelType">NÍVEL DO CARGO*</label>
                      <label for="Level" ng-if="vm.levelType === 'military'">PATENTE*</label>
        
                      <select class="form-control" id="Level" name="Level" ng-model="vm.user.positions[0].LevelId" required
                              uib-tooltip="{{!vm.levelType ? 'selecione primeiramente o meio de atuação' : null}}"
                              tooltip-placement="bottom">
                        <option value=""></option>
                        <option ng-repeat="level in vm.levelsList | filter: {Type: vm.levelType}" ng-value="level.LevelId">
                          {{level.Description}}
                        </option>
                      </select>
                      <p class="help-block" ng-show="formUpdate.Level.$error.required && vm.submittedUpdate && vm.levelType === 'civil'">
                        Insira o nível do cargo.
                      </p>
                      <p class="help-block" ng-show="formUpdate.Level.$error.required && vm.submittedUpdate && vm.levelType === 'military'">
                        Insira a patente.
                      </p>
                    </div>
                  </div>
                </div>
        
                <div class="form-group" ng-if="vm.user.positions[0].LevelId === vm.levelOtherId">
                  <label for="LevelOther">OUTRO NÍVEL DO CARGO*</label>
                  <input type="text" name="LevelOther" id="LevelOther" class="form-control"
                          ng-model="vm.user.positions[0].LevelOther" required>
                  <p class="help-block" ng-show="formUpdate.LevelOther.$error.required && vm.submittedUpdate">
                    Insira outro nível do cargo.
                  </p>
                </div>
        
                <div class="form-group">
                  <label for="CompanyName">NOME DA EMPRESA*</label>
                  <input type="text" name="CompanyName" id="CompanyName" class="form-control"
                          placeholder="Ex: Microsoft, 1º Btl DQBRN (sigla)"
                          ng-model="vm.user.positions[0].company.Name" required>
                  <p class="help-block" ng-show="formUpdate.CompanyName.$error.required && vm.submittedUpdate">
                    Insira o nome da empresa.
                  </p>
                </div>
        
                <div class="form-group">
                  <label for="CompanyType">TIPO DE EMPRESA*</label>
                  <select class="form-control" id="CompanyType" name="CompanyType"
                          ng-model="vm.user.positions[0].company.CompanyTypeId" required>
                    <option ng-repeat="companyType in vm.companyTypesList"
                            ng-value="companyType.CompanyTypeId">{{companyType.PortugueseDescription}}
                    </option>
                  </select>
                  <p class="help-block" ng-show="formUpdate.CompanyType.$error.required && vm.submittedUpdate">
                    Insira o tipo da empresa.
                  </p>
                </div>
        
                <div class="form-group">
                  <label for="StartDateMonth">DATA DE INÍCIO*</label>
                  <div class="row p-0">
                    <div class="col">
                      <select class="form-control" name="StartDateMonth" id="StartDateMonth"
                              ng-model="vm.user.positions[0].StartDateMonth" required>
                        <option value="">Mês</option>
                        <option ng-value="1">janeiro</option>
                        <option ng-value="2">fevereiro</option>
                        <option ng-value="3">março</option>
                        <option ng-value="4">abril</option>
                        <option ng-value="5">maio</option>
                        <option ng-value="6">junho</option>
                        <option ng-value="7">julho</option>
                        <option ng-value="8">agosto</option>
                        <option ng-value="9">setembro</option>
                        <option ng-value="10">outubro</option>
                        <option ng-value="11">novembro</option>
                        <option ng-value="12">dezembro</option>
                      </select>
                    </div>
                    <div class="col">
                      <select class="form-control" name="StartDateYear" id="StartDateYear"
                              ng-model="vm.user.positions[0].StartDateYear" required>
                        <option value="">Ano</option>
                        <option ng-repeat="year in vm.graduationYears | orderBy:'-'"
                                ng-value="year" ng-if="year <= vm.year">{{year}}
                        </option>
                      </select>
                    </div>
                  </div>
                  <p class="help-block" ng-if="formUpdate.StartDateMonth.$error.required && vm.submittedUpdate">
                    Insira o mês de início do cargo.
                  </p>
                  <p class="help-block" ng-if="formUpdate.StartDateYear.$error.required && vm.submittedUpdate">
                    Insira o ano de início do cargo.
                  </p>
                </div>
              </div>
     
              <br>
            </div>

            <br>
            <p class="help-block mb-4" ng-if="vm.errors.update && vm.submittedUpdate">
              {{vm.errors.update}}
            </p>

            <div class="row align-items-center mt-3">
              <div class="col-xs-12 col-sm-auto">
                <button class="btn btn-outline-danger" ng-click="vm.cancelEdit()">
                  CANCELAR
                </button>
                <br class="d-block d-sm-none">
              </div>
              <div class="col-xs-12 col-sm-auto">
                <button class="btn btn-danger" type="submit">
                  SALVAR
                </button>
              </div>
            </div>

          </div>
        </form>

        <form class="form" name="formPassword" ng-submit="vm.changePassword(formPassword)" novalidate>
          <div class="row mt-5">
            <div class="col-12 col-sm-6">
              <div class="card mt-3" ng-if="vm.user.hasPassword">
                <div class="card-body">
                  <h5 class="card-title">Alterar senha</h5>

                  <div class="form-group">
                    <label>SENHA ANTIGA*</label>
                    <input type="password" name="password" class="form-control" ng-model="vm.user.oldPassword"
                           ng-change="formPassword.password.$error.wrong = false" required/>
                    <p class="help-block"
                       ng-show="formPassword.password.$error.required && vm.submittedPassword">
                      Insira a senha antiga.
                    </p>
                    <p class="help-block" ng-show="formPassword.password.$error.wrong">
                      {{ vm.errors.password }}
                    </p>
                  </div>

                  <div class="form-group">
                    <label>NOVA SENHA*</label>
                    <input type="password" name="newPassword" class="form-control" ng-model="vm.user.newPassword"
                           ng-minlength="6" required/>
                    <p class="help-block"
                       ng-show="(formPassword.newPassword.$error.minlength || formPassword.newPassword.$error.required) && vm.submittedPassword">
                      A senha deve ter pelo menos 6 caracteres.
                    </p>
                  </div>

                  <div class="form-group">
                    <label>CONFIRMAR NOVA SENHA*</label>
                    <input type="password" name="confirmPassword" class="form-control"
                           ng-model="vm.user.confirmPassword"
                           match="vm.user.newPassword" ng-minlength="6" required/>
                    <p class="help-block" ng-show="formPassword.confirmPassword.$error.match && vm.submittedPassword">
                      As senhas devem coincidir.
                    </p>
                  </div>

                  <p class="help-block text-success mb-4"> {{ vm.messagePassword }} </p>
                  <button class="btn btn-dark m-auto" type="submit">SALVAR SENHA</button>

                </div>
              </div>
            </div>
          </div>
        </form>

      </div>

    </div>

    <!-- Submitted projects -->
    <ul class="nav navbar-nav flex-column w-100 mb-2 mt-3 d-block d-lg-none"
        ng-if="vm.user.personType.Description === 'FormerStudentAndProfessor' || vm.user.personType.Description === 'Professor' || vm.user.personType.Description === 'Student'">
      <li class="nav-item" ng-class="{active: vm.itemSelected.route === 'submitted_projects'}">
        <a class="nav-link" ng-click="vm.selectPage('submitted_projects')" href="#">Projetos submetidos</a>
      </li>
    </ul>
    <div class="col-12 col-lg-8"
         ng-if="vm.itemSelected.route === 'submitted_projects' && (vm.user.personType.Description === 'FormerStudentAndProfessor' || vm.user.personType.Description === 'Professor' || vm.user.personType.Description === 'Student')">

      <div class="card-columns">

        <div class="card project-card mb-3" ng-repeat="project in vm.Project.submittedProjects">
          <div class="card-body">
            <h5 class="card-title">
              {{project.ProjectName}}
              <i class="fa fa-pencil pull-right c-pointer" uib-tooltip="Editar projeto" tooltip-placement="bottom"
                 ng-if="!project.IsApproved && !project.IsExcluded" ng-click="vm.editProject(project)"></i>
            </h5>

            <div class="form-group">
              <label>PROFESSOR RESPONSÁVEL</label>
              <input type="text" class="form-control-plaintext" readonly value="{{project.professor.name}}">
            </div>

            <div class="form-group">
              <label>LÍDER DA EQUIPE</label>
              <input type="text" class="form-control-plaintext" readonly value="{{project.leader.name}}">
            </div>

            <div class="row">
              <div class="col">
                <div class="form-group">
                  <label>STATUS</label>
                  <input type="text" class="form-control-plaintext" readonly
                         value="{{project.IsApproved ? 'Aprovado' : project.IsExcluded ? 'Não aprovado' : 'Em avaliação'}}">
                </div>
              </div>

              <div class="col">
                <div class="form-group">
                  <label>DATA DE SUBMISSÃO</label>
                  <input type="text" class="form-control-plaintext" readonly
                         value="{{project.SubmissionDate | date:'dd/MM/yyyy'}}">
                </div>
              </div>
            </div>

            <div class="row justify-content-between mt-2">
              <div class="col-auto" ng-click="vm.openProject(project)">
                <a href="#" class="card-link text-dark" ng-if="!project.IsApproved">PREVIEW</a>
                <a href="#" class="card-link text-dark" ng-if="project.IsApproved">VER MAIS</a>
              </div>
              <div class="col-auto" ng-click="vm.insertResult(project)" ng-if="project.IsApproved">
                <a href="#" class="card-link text-dark" ng-if="!project.Results">INSERIR RESULTADO</a>
                <a href="#" class="card-link text-dark" ng-if="project.Results">EDITAR RESULTADO</a>
              </div>
            </div>

          </div>
        </div>

      </div>

      <br>
      <button class="btn btn-outline-danger" ui-sref="submission">
        SUBMETER PROJETO
      </button>

    </div>

    <!-- Supported projects -->
    <ul class="nav navbar-nav flex-column w-100 mb-2 mt-3 d-block d-lg-none">
      <li class="nav-item" ng-class="{active: vm.itemSelected.route === 'supported_projects'}">
        <a class="nav-link" ng-click="vm.selectPage('supported_projects')" href="#">Projetos apoiados</a>
      </li>
    </ul>
    <div class="col-12 col-lg-8" ng-if="vm.itemSelected.route === 'supported_projects'">

      <div class="card project-card mb-3" ng-repeat="donation in vm.Donation.myDonations | orderBy: '-DonationDate'" ng-if="!donation.transaction || (donation.transaction && !donation.transaction.SubscriptionId)">
        <div class="card-body">
          <h5 class="card-title">
            {{donation.Type === 'project' ? donation.project.ProjectName : 'Contribuição Geral'}}
          </h5>

          <div class="row">
            <div class="col">
              <div class="form-group">
                <label>MEIO DE PAGAMENTO</label>
                <input type="text" class="form-control-plaintext" readonly 
                        value="{{donation.PaymentMethod}}">
              </div>
            </div>

            <div class="col" ng-if="donation.transaction">
              <div class="form-group" ng-if="donation.transaction.PaymentMethod === 'credit_card'">
                <label for="CardShow">CARTÃO</label>
                <input type="text" id="CardShow" name="Card" class="form-control-plaintext" readonly value="{{donation.transaction.CardBrand | uppercase}} - FINAL {{donation.transaction.CardLastDigits}}">
              </div>
              <div class="form-group" ng-if="donation.transaction.PaymentMethod === 'boleto'">
                <label for="BoletoShow">
                  BOLETO
                  <a href="{{donation.transaction.BoletoURL}}" target="_blank" class="text-dark text-center d-inline ml-1">
                    <i class="fa fa-external-link-square" uib-tooltip="Visualizar Boleto" tooltip-placement="right"></i>
                  </a>
                </label>
                <input type="text" id="BoletoShow" name="Boleto" class="form-control-plaintext" readonly ng-model="donation.transaction.BoletoBarcode">
              </div>
            </div>

            <div class="col">
              <div class="form-group">
                <label>DATA</label>
                <input type="text" class="form-control-plaintext" readonly
                        value="{{donation.DonationDate | date:'dd/MM/yyyy'}}">
              </div>          
            </div>  
          </div>

          <div class="row">
            <div class="col">
              <div class="form-group">
                <label>STATUS</label>
                <input type="text" class="form-control-plaintext" readonly ng-if="!donation.transaction"
                        value="{{donation.IsApproved ? 'Pagamento confirmado' : 'Comprovante em análise'}}">
                <input type="text" class="form-control-plaintext" readonly ng-if="donation.transaction"
                        value="{{donation.Status}}">
              </div>
            </div>

            <div class="col" ng-if="donation.transaction">
              <div class="form-group" ng-if="donation.transaction.PaymentMethod === 'credit_card'">
                <label for="CardHolderShow">NOME</label>
                <input type="text" id="CardHolderShow" name="Card" class="form-control-plaintext" readonly ng-model="donation.transaction.CardHolderName">
              </div>
              <div class="form-group" ng-if="donation.transaction.PaymentMethod === 'boleto'">
                <label for="BoletoExpirationShow">VENCIMENTO</label>
                <input type="text" id="BoletoExpirationShow" name="Boleto" class="form-control-plaintext" readonly value="{{donation.transaction.BoletoExpirationDate | date: 'dd/MM/yyyy'}}">
              </div>
            </div>

            <div class="col">
              <div class="form-group">
                <label>VALOR</label>
                <input type="text" class="form-control-plaintext" readonly
                        value="{{donation.ValueInCents/100 | currency}}">
              </div> 
            </div>
          </div>

          <a href="#" class="card-link text-dark text-right d-block"
              ng-if="donation.Type === 'project'" ng-click="vm.openProject(donation.project)">VER MAIS INFORMAÇÕES</a>

        </div>
      </div>

      <div class="mt-5" ng-if="vm.Donation.myDonations.length > 0">
        <h5 class="pb-3">Assinaturas</h5>
        
        <div class="card project-card mb-3" ng-repeat="subscription in vm.Subscription.mySubscriptions">
          <div class="card-body" ng-init="subscription.collapsed = true">
            <h5 class="card-title">
              {{subscription.plan.Name}} - {{subscription.project ? subscription.project.ProjectName : 'Contribuição Geral'}}
              <a class="text-dark pull-right" href="{{subscription.ManageURL}}" target="_blank">
                <i class="fa fa-external-link" uib-tooltip="Gerenciar assinatura" tooltip-placement="bottom"></i> 
              </a>
            </h5>

            <div class="row">
              <div class="col-12 col-md-4">
                <div class="form-group">
                  <label>STATUS</label>
                  <input type="text" class="form-control-plaintext" readonly
                          value="{{subscription.Status}}">
                </div>
              </div>

              <div class="col-6 col-md-4">
                <div class="form-group">
                  <label>DATA DE INÍCIO</label>
                  <input type="text" class="form-control-plaintext" readonly
                          value="{{subscription.CreateDate | date:'dd/MM/yyyy'}}">
                </div>
              </div>

              <div class="col-6 col-md-4">
                <div class="form-group">
                  <label>VALOR</label>
                  <input type="text" class="form-control-plaintext" readonly
                          value="{{subscription.plan.Amount | currency}}">
                </div>
              </div>  
            </div>

            <table class="table table-striped table-hover table-fixed table-responsive-sm bg-white mt-2 mb-4" ng-if="!subscription.collapsed">
              <tbody>
              <tr ng-repeat="transaction in subscription.transactions | orderBy: '-CreateDate'">
                <td class="small-font">
                  {{transaction.CreateDate | date:'dd/MM/yyyy'}}
                </td>
                <td class="small-font">
                  {{transaction.CardHolderName}}
                </td>
                <td class="small-font">
                    {{transaction.CardBrand | uppercase}} - FINAL {{transaction.CardLastDigits}}
                </td>
                <td class="small-font">
                  {{transaction.Status}}
                </td>
              </tr>
              </tbody>
            </table>

            <div class="row p-0 justify-content-between pt-1">
              <div class="col-auto small-font">
                {{subscription.transactions.length === 1 ? '1 transação' : subscription.transactions.length + ' transações'}}
              </div>
              <div class="col-auto" ng-if="subscription.transactions.length > 0">
                <a class="card-link text-dark d-block pt-0 c-pointer"
                  ng-click="subscription.collapsed = !subscription.collapsed">
                  <span ng-if="subscription.collapsed">VER DETALHES</span>
                  <span ng-if="!subscription.collapsed">OCULTAR DETALHES</span>
                  <i class="fa pull-right icon-font ml-2"
                      ng-class="{'fa-angle-down': subscription.collapsed, 'fa-angle-up': !subscription.collapsed}"></i> 
                </a>
              </div>
            </div>

          </div>
        </div>

      </div>

      <div class="mt-4" ng-if="vm.Donation.myDonations.length === 0">
        <p>
          Nenhuma contribuição encontrada. 
          <br>
          Clique abaixo para apoiar e fortalecer a comunidade IMEana.
        </p>
      </div>

      <button class="btn btn-outline-danger mt-4" ui-sref="donate">
        APOIAR
      </button>

    </div>

    <!-- My opportunities -->
    <ul class="nav navbar-nav flex-column w-100 mb-2 mt-3 d-block d-lg-none">
      <li class="nav-item" ng-class="{active: vm.itemSelected.route === 'my_opportunities'}">
        <a class="nav-link" ng-click="vm.selectPage('my_opportunities')" href="#">Minhas vagas</a>
      </li>
    </ul>
    <div class="col-12 col-lg-8" ng-if="vm.itemSelected.route === 'my_opportunities'">

      <nav class="navbar navbar-expand-lg navbar-light bg-light mb-4">
        <a class="navbar-brand d-block d-lg-none">{{vm.opportunityPage === 'my_applications' ? 'Minhas candidaturas' : 'Meus anúncios'}}</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" href="#" ng-class="{active: vm.opportunityPage === 'my_applications'}" 
                 ui-sref="profile({view: 'my_opportunities', subView: 'my_applications'})">Minhas candidaturas</a>
            </li>
            <li class="nav-item pl-lg-2">
              <a class="nav-link" href="#" ng-class="{active: vm.opportunityPage === 'my_posts'}" 
                 ui-sref="profile({view: 'my_opportunities', subView: 'my_posts'})">Meus anúncios</a>
            </li>
          </ul>
        </div>
      </nav>

      <!-- my_applications -->
      <div ng-if="vm.opportunityPage === 'my_applications'">
        <div class="card-columns">
          <div class="card project-card mb-3" ng-repeat="application in vm.Opportunity.myApplications">
            <div class="card-body">
              <h5 class="card-title">
                {{application.opportunity.Title}}
              </h5>

              <div class="row">
                <div class="col">
                  <div class="form-group">
                    <label>TIPO DE VAGA</label>
                    <input type="text" class="form-control-plaintext" readonly
                          value="{{application.opportunity.opportunityType.Description}}">
                  </div>
                </div>

                <div class="col">
                  <div class="form-group">
                    <label>DATA</label>
                    <input type="text" class="form-control-plaintext" readonly
                          value="{{application.ApplicationDate | date:'dd/MM/yyyy'}}">
                  </div>
                </div>
              </div>

              <div class="form-group">
                <label>STATUS</label>
                <input type="text" class="form-control-plaintext" readonly
                      value="{{vm.today <= application.ExpirationDate ? 'Cadidatura enviada' : 'Vaga encerrada'}}">
              </div>

              <a ui-sref="opportunities.view({OpportunityId: application.opportunity.OpportunityId, PrettyURL: vm.Util.convertToSlug(application.opportunity.Title), forceReload: false})"
                class="card-link text-dark text-right d-block">
                VER MAIS INFORMAÇÕES
              </a>

            </div>
          </div>
        </div>

        <button class="btn btn-outline-danger mt-3" ui-sref="opportunities.search">
          PESQUISAR VAGAS
        </button>
      </div>

      <!-- my_posts -->
      <div ng-if="vm.opportunityPage === 'my_posts'">
        <div class="card project-card mb-3" ng-repeat="opportunity in vm.Opportunity.myPosts">
          <div class="card-body" ng-init="opportunity.collapsed = true">
            <h5 class="card-title">
              {{opportunity.Title}}
                <a class="text-dark pull-right" ui-sref="opportunities.view({OpportunityId: opportunity.OpportunityId, PrettyURL: vm.Util.convertToSlug(opportunity.Title), forceReload: false})">
                    <i class="fa fa-external-link" uib-tooltip="Visualizar vaga" tooltip-placement="bottom"></i> 
                </a>
            </h5>

            <div class="row">
              <div class="col-6 col-md-4">
                <div class="form-group">
                  <label>TIPO DE VAGA</label>
                  <input type="text" class="form-control-plaintext" readonly
                          value="{{opportunity.opportunityType.Description}}">
                </div>
              </div>

              <div class="col-6 col-md-4">
                <div class="form-group">
                  <label>DATA</label>
                  <input type="text" class="form-control-plaintext" readonly
                          value="{{opportunity.PostDate | date:'dd/MM/yyyy'}}">
                </div>
              </div>

              <div class="col-12 col-md-4">
                <div class="form-group">
                  <label>STATUS</label>
                  <input type="text" class="form-control-plaintext" readonly
                          value="{{opportunity.IsApproved ? 'Vaga anunciada' : 'Aguardando aprovação'}}">
                </div>
              </div>
            </div>

            <table class="table table-striped table-hover table-fixed table-responsive-sm bg-white mt-2 mb-4" ng-if="!opportunity.collapsed">
              <tbody>
              <tr ng-repeat="application in opportunity.opportunityApplications | orderBy: 'ApplicationDate'">
                <td class="pl-3">
                  <a class="text-dark small-font font-weight-bold" ng-click="vm.Modal.openShowApplication(application.OpportunityId, application.PersonId)" href="#">{{application.user.name}}</a>
                </td>
                <td class="small-font">
                  {{application.ApplicationDate | date:'dd/MM/yyyy'}}
                </td>
                <td class="pr-3">
                  <a ng-if="application.resume" href="{{application.resume.Path}}" class="text-dark ml-3 pull-right" target="_blank">
                    <i class="fa fa-file-pdf-o" uib-tooltip="Currículo" tooltip-placement="bottom"></i> 
                  </a>
                  <a ng-if="application.LinkedinLink" href="{{application.LinkedinLink}}" class="text-dark ml-3 pull-right" target="_blank">
                    <i class="fa fa-linkedin" uib-tooltip="LinkedIn" tooltip-placement="bottom"></i> 
                  </a>
                  <a ng-if="application.Message" class="text-dark ml-3 pull-right c-pointer" ng-click="vm.Modal.openShowApplication(application.OpportunityId, application.PersonId)">
                    <i class="fa fa-comment-o" uib-tooltip="Mensagem" tooltip-placement="bottom"></i> 
                  </a>
                </td>
              </tr>
              </tbody>
            </table>

            <div class="row p-0 justify-content-between pt-1">
              <div class="col-auto small-font">
                {{opportunity.opportunityApplications.length === 0 ? 'Nenhuma candidatura recebida' : opportunity.opportunityApplications.length === 1 ? '1 candidato' : opportunity.opportunityApplications.length + ' candidatos'}}
              </div>
              <div class="col-auto" ng-if="opportunity.opportunityApplications.length > 0">
                <a class="card-link text-dark d-block pt-0 c-pointer"
                  ng-click="opportunity.collapsed = !opportunity.collapsed">
                  <span ng-if="opportunity.collapsed">EXPANDIR</span>
                  <span ng-if="!opportunity.collapsed">OCULTAR</span>
                  <i class="fa pull-right icon-font ml-2"
                      ng-class="{'fa-angle-down': opportunity.collapsed, 'fa-angle-up': !opportunity.collapsed}"></i> 
                </a>
              </div>
            </div>

          </div>
        </div>

        <button class="btn btn-outline-danger mt-4" ui-sref="opportunities.post">
          ANUNCIAR VAGA
        </button>
    
      </div>
    </div>

    <ul class="nav navbar-nav flex-column w-100 mb-2 mt-3 d-block d-lg-none">
      <li class="nav-item">
        <a class="nav-link" href="#" ng-click="vm.logoutUser()">Sair</a>
      </li>
    </ul>

  </div>
</div>