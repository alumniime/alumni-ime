<div class="container projectView">
  <div class="row justify-content-center">

    <div class="col-10 col-md-6 col-lg-7 padding-lateral">

      <div class="form-group">
        <h5 class="page-title">
          {{vm.project.ProjectName}}
          <i class="fa fa-pencil pull-right c-pointer" uib-tooltip="Editar projeto" tooltip-placement="bottom"
             ng-if="vm.previewMode" ng-click="vm.editProject(vm.project)"></i>
          <i class="fa fa-line-chart pull-right c-pointer"
             uib-tooltip="{{vm.project.Results ? 'Editar resultado' : 'Inserir resultado'}}" tooltip-placement="bottom"
             ng-if="vm.project.SubmissionerId === vm.getCurrentUser().PersonId && !vm.previewMode"
             ng-click="vm.insertResult(vm.project)"></i>
        </h5>
        <div class="legend">
          por {{vm.project.TeamName}}
        </div>
      </div>

      <div class="text-content">
        {{vm.project.Abstract}}
      </div>

      <div class="carousel-col-4 d-none d-lg-block p-0 mt-4">
        <img class="img-selected img-fluid mb-4 c-pointer" alt="Project image" ng-src="{{vm.selectedProjectImage.Path}}"
             ng-click="vm.openPhoto(vm.projectImages, vm.selectedProjectImageIndex)"
             ng-if="vm.selectedProjectImage.Path">
        <div id="carouselAlumniCol" class="carousel slide" data-ride="carousel">
          <div class="carousel-inner">
            <div class="carousel-item" ng-repeat="image in vm.projectImages"
                 ng-class="{active: $index === 0}" ng-if="vm.projectImages.length / 3 > $index">
              <div class="row">
                <div class="col c-pointer img-background" ng-click="vm.selectImage(3 * $index, 'project')"
                     style="background-image: url('{{vm.projectImages[3 * $index].Path}}')"
                     ng-class="{active: 3 * $index === vm.selectedProjectImageIndex}">
                </div>
                <div class="col c-pointer img-background" ng-click="vm.selectImage(3 * $index + 1, 'project')"
                     style="background-image: url('{{vm.projectImages[3 * $index + 1].Path}}')"
                     ng-class="{active: 3 * $index + 1 === vm.selectedProjectImageIndex}">
                </div>
                <div class="col c-pointer img-background" ng-click="vm.selectImage(3 * $index + 2, 'project')"
                     style="background-image: url('{{vm.projectImages[3 * $index + 2].Path}}')"
                     ng-class="{active: 3 * $index + 2 === vm.selectedProjectImageIndex}">
                </div>
              </div>
            </div>
          </div>
          <a class="carousel-control-prev" href="#carouselAlumniCol" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon fa fa-chevron-left" aria-hidden="true"></span>
            <span class="sr-only">Anterior</span>
          </a>
          <a class="carousel-control-next " href="#carouselAlumniCol" role="button" data-slide="next">
            <span class="carousel-control-next-icon fa fa-chevron-right" aria-hidden="true"></span>
            <span class="sr-only">Próximo</span>
          </a>
        </div>
      </div>

      <div class="donations-mobile d-md-none">
        <div class="card project-card mb-3">
          <div class="card-body">
            <div class="form-group">
              <label>ORÇAMENTO</label>
              <div class="form-control-estimated">{{vm.project.EstimatedPriceInCents/100 | currency}}</div>
            </div>

            <div class="form-group mb-0">
              <label>ARRECADADO</label>
              <div class="form-control-collected">{{vm.project.CollectedPriceInCents/100 | currency}}</div>
            </div>

            <div class="form-group">
              <div class="progress">
                <div class="progress-bar progress-bar-custom" aria-valuemin="0" aria-valuemax="100"
                     role="progressbar"
                     style="width: {{vm.project.CollectedPriceInCents/vm.project.EstimatedPriceInCents*100}}%;">
                </div>
              </div>

              <div class="row mt-2">
                <div class="col-8">
                  <input type="text" class="form-control-plaintext pb-0" readonly
                         value="{{100*vm.project.CollectedPriceInCents/vm.project.EstimatedPriceInCents | number: 0}}%">
                </div>
                <div class="col-4">
                  <input type="text" class="form-control-plaintext-right" readonly
                         value="{{vm.project.DonationsNumber}} pessoas apoiaram">
                </div>
              </div>
            </div>

            <a class="btn btn-danger m-auto" href="#" ng-click="vm.openDonate(vm.project)">APOIAR PROJETO</a>
          </div>
        </div>
      </div>

      <div class="carousel-mobile d-lg-none p-0 mt-4">
        <div id="carouselAlumni" class="carousel slide" data-ride="carousel">
          <ol class="carousel-indicators">
            <li data-target="#carouselAlumni" ng-repeat="image in vm.projectImages" data-slide-to="{{$index}}"
                ng-class="{active: $index === 0}"></li>
          </ol>
          <div class="carousel-inner">
            <div class="carousel-item img-background" ng-repeat="image in vm.projectImages"
                 ng-class="{active: $index === 0}"
                 style="background-image: url('{{image.Path}}')">
            </div>
          </div>
          <a class="carousel-control-prev" href="#carouselAlumni" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Anterior</span>
          </a>
          <a class="carousel-control-next" href="#carouselAlumni" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Próximo</span>
          </a>
        </div>
      </div>

      <div class="row mt-2">
        <div class="col-8 col-xs-6">
          <div class="info-name">
            SEÇÃO DE ENSINO
          </div>
          <div class="info-text">
            {{vm.project.se.Description}}
          </div>
        </div>

        <div class="col-4 col-xs-6">
          <div class="info-name">
            PROFESSOR RESPONSÁVEL
          </div>
          <div class="info-text">
            {{vm.project.professor.name}}
          </div>
        </div>
      </div>

      <div class="row mt-2">
        <div class="col-8 col-xs-6">
          <div class="info-name">
            LÍDER DO PROJETO
          </div>
          <div class="info-text">
            {{vm.project.leader.name}}
          </div>
        </div>

        <div class="col-4 col-xs-6">
          <div class="info-name">
            TÉRMINO ESTIMADO
          </div>
          <div class="info-text">
            {{vm.project.ConclusionDate | date: 'dd/MM/yyyy'}}
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-8 col-xs-6">
          <div class="info-name">
            MEMBROS
          </div>
          <div class="info-text">
            {{vm.project.TeamMembers}}
          </div>
        </div>

        <div class="col-4 col-xs-6">
          <div class="info-name">
            ALUNOS ENVOLVIDOS
          </div>
          <div class="info-text">
            {{vm.project.StudentsNumber}}
          </div>
        </div>
      </div>

      <div class="info-name">
        METAS/RESULTADOS ESPERADOS PARA O PROJETO
      </div>
      <div class="info-text">
        {{vm.project.Goals}}
      </div>

      <div class="info-name">
        BENEFÍCIOS CONCRETOS PARA O IME
      </div>
      <div class="info-text">
        {{vm.project.Benefits}}
      </div>

      <div class="info-name">
        CRONOGRAMA FÍSICO-FINANCEIRO
      </div>
      <div class="info-text">
        {{vm.project.Schedule}}
      </div>

      <div class="col results" ng-if="vm.project.Results">
        <div class="card project-card mb-3">
          <div class="card-body">

            <div class="result-title mb-3">Resultado do Projeto</div>

            <div class="info-text">
              {{vm.project.Results}}
            </div>

            <div class="carousel-col-4 d-none d-lg-block p-0 mt-4">
              <img class="img-selected img-fluid mb-4 c-pointer" alt="Project image"
                   ng-src="{{vm.selectedResultImage.Path}}"
                   ng-click="vm.openPhoto(vm.resultImages, vm.selectedResultImageIndex)"
                   ng-if="vm.selectedResultImage.Path">
              <div id="carouselAlumniColResult" class="carousel slide" data-ride="carousel">
                <div class="carousel-inner">
                  <div class="carousel-item" ng-repeat="image in vm.resultImages"
                       ng-class="{active: $index === 0}" ng-if="vm.resultImages.length / 3 > $index">
                    <div class="row">
                      <div class="col c-pointer img-background" ng-click="vm.selectImage(3 * $index, 'result')"
                           style="background-image: url('{{vm.resultImages[3 * $index].Path}}')"
                           ng-class="{active: 3 * $index === vm.selectedResultImageIndex}">
                      </div>
                      <div class="col c-pointer img-background" ng-click="vm.selectImage(3 * $index + 1, 'result')"
                           style="background-image: url('{{vm.resultImages[3 * $index + 1].Path}}')"
                           ng-class="{active: 3 * $index + 1 === vm.selectedResultImageIndex}">
                      </div>
                      <div class="col c-pointer img-background" ng-click="vm.selectImage(3 * $index + 2, 'result')"
                           style="background-image: url('{{vm.resultImages[3 * $index + 2].Path}}')"
                           ng-class="{active: 3 * $index + 2 === vm.selectedResultImageIndex}">
                      </div>
                    </div>
                  </div>
                </div>
                <a class="carousel-control-prev" href="#carouselAlumniColResult" role="button" data-slide="prev">
                  <span class="carousel-control-prev-icon fa fa-chevron-left" aria-hidden="true"></span>
                  <span class="sr-only">Anterior</span>
                </a>
                <a class="carousel-control-next " href="#carouselAlumniColResult" role="button" data-slide="next">
                  <span class="carousel-control-next-icon fa fa-chevron-right" aria-hidden="true"></span>
                  <span class="sr-only">Próximo</span>
                </a>
              </div>
            </div>

            <div class="carousel-mobile d-lg-none p-0 mt-4">
              <div id="carouselAlumniResult" class="carousel slide" data-ride="carousel">
                <ol class="carousel-indicators">
                  <li data-target="#carouselAlumniResult" ng-repeat="image in vm.resultImages"
                      data-slide-to="{{$index}}"
                      ng-class="{active: $index === 0}"></li>
                </ol>
                <div class="carousel-inner">
                  <div class="carousel-item img-background" ng-repeat="image in vm.resultImages"
                       ng-class="{active: $index === 0}"
                       style="background-image: url('{{image.Path}}')">
                  </div>
                </div>
                <a class="carousel-control-prev" href="#carouselAlumniResult" role="button" data-slide="prev">
                  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                  <span class="sr-only">Anterior</span>
                </a>
                <a class="carousel-control-next" href="#carouselAlumniResult" role="button" data-slide="next">
                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                  <span class="sr-only">Próximo</span>
                </a>
              </div>
            </div>

          </div>
        </div>
      </div>

    </div>

    <div class="donations d-none d-md-block col-8 col-md-4 col-lg-3">
      <div class="card project-card mb-3">
        <div class="card-body">
          <div class="form-group">
            <label>ORÇAMENTO</label>
            <div class="form-control-estimated">{{vm.project.EstimatedPriceInCents/100 | currency}}</div>
          </div>

          <div class="form-group mb-0">
            <label>ARRECADADO</label>
            <div class="form-control-collected">{{vm.project.CollectedPriceInCents/100 | currency}}</div>
          </div>

          <div class="form-group">
            <div class="progress">
              <div class="progress-bar progress-bar-custom" aria-valuemin="0" aria-valuemax="100"
                   role="progressbar"
                   style="width: {{vm.project.CollectedPriceInCents/vm.project.EstimatedPriceInCents*100}}%;">
              </div>
            </div>

            <div class="row mt-2">
              <div class="col-8">
                <input type="text" class="form-control-plaintext pb-0" readonly
                       value="{{100*vm.project.CollectedPriceInCents/vm.project.EstimatedPriceInCents | number: 0}}%">
              </div>
              <div class="col-4">
                <input type="text" class="form-control-plaintext-right" readonly
                       value="{{vm.project.DonationsNumber}} pessoas apoiaram">
              </div>
            </div>
          </div>

          <a class="btn btn-danger m-auto" href="#" ng-click="vm.openDonate(vm.project)">APOIAR PROJETO</a>
        </div>
      </div>
    </div>

  </div>
</div>
