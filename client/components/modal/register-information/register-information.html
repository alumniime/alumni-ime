<div class="nav nav-pills nav-fill">
  <span class="nav-item nav-link" ng-class="{active: vm.pills >= 1}"></span>
  <span class="nav-item space"></span>
  <span class="nav-item nav-link" ng-class="{active: vm.pills >= 2}"></span>
  <span class="nav-item space"></span>
  <span class="nav-item nav-link" ng-class="{active: vm.pills >= 3}"></span>
</div>

<div class="modal-header d-block">
  <i class="fa fa-close close-button" ng-click="vm.cancelModal()"></i>
  <h6 class="modal-title text-center modal-title" ng-if="vm.page === 1">Informações gerais</h6>
  <h6 class="modal-title text-center modal-title" ng-if="vm.page === 2">Informações complementares</h6>
  <h6 class="modal-title text-center modal-title" ng-if="vm.page === 3">Informações profissionais</h6>
  <h6 class="modal-title text-center modal-title" ng-if="vm.page === 4">Como você conheceu a página?</h6>
</div>

<div class="modal-body" id="modal-body">

  <!-- There is only a form with many pages -->
  <form class="form" name="form" ng-submit="vm.registerNewUser(form)" novalidate>

    <!-- General information -->
    <div class="page1" ng-show="vm.page === 1">

      <input type="hidden" id="PersonTypeId" name="PersonTypeId" ng-model="vm.user.PersonTypeId" required>

      <div class="form-group">
        <label for="Birthdate">DATA DE NASCIMENTO*</label>
        <input type="text" id="Birthdate" name="Birthdate" placeholder="10/03/1980" mask="39/19/9999" class="form-control"
               ng-model="vm.Birthdate" required
               ng-change="vm.validateDate(vm.Birthdate)">
        <p class="help-block" ng-show="form.Birthdate.$error.required && vm.submitted">
          Insira a sua data de nascimento.
        </p>
        <p class="help-block" ng-show="(form.Birthdate.$invalid && vm.submitted) || vm.dateInvalid">
          Insira uma data válida.
        </p>
      </div>

      <div class="form-group">
        <label for="Genre">GÊNERO*</label>
        <select class="form-control" id="Genre" name="Genre" ng-model="vm.user.Genre" required>
          <option value="M">Masculino</option>
          <option value="F">Feminino</option>
          <option value="O">Outro</option>
        </select>
        <p class="help-block" ng-show="form.Genre.$error.required && vm.submitted">
          Insira o seu gênero.
        </p>
      </div>

      <div class="form-group">
        <label for="Phone">TELEFONE*</label>
        <input type="tel" id="Phone" name="Phone" placeholder="+55 (00) 00000-0000" mask="+99 (99) 9?9999-9999" class="form-control"
               ng-model="vm.user.Phone" required>
        <p class="help-block" ng-show="form.Phone.$error.required && vm.submitted">
          Insira o seu telefone.
        </p>
        <p class="help-block" ng-show="form.Phone.$invalid && vm.submitted">
          Insira um telefone válido.
        </p>
      </div>

    </div>

    <!-- Complementary information -->
    <div class="page2" ng-if="vm.page >= 2 && vm.personType.Description !== 'Visitor'" ng-show="vm.page === 2">

      <div class="form-group" ng-if="vm.personType.Description !== 'Professor'">
        <label for="GraduationYear">ANO DE FORMAÇÃO*</label>
        <select class="form-control" id="GraduationYear" name="GraduationYear" ng-model="vm.user.GraduationYear"
                required>
          <option ng-repeat="year in vm.graduationYears | orderBy:'-'" ng-value="year">{{year}}</option>
        </select>
        <p class="help-block" ng-if="form.GraduationYear.$error.required && vm.submitted">
          Insira o seu ano de formação.
        </p>
      </div>

      <div class="form-group" ng-if="vm.personType.Description !== 'Professor'">
        <label for="GraduationEngineeringId">ENGENHARIA*</label>
        <select class="form-control" id="GraduationEngineeringId" name="GraduationEngineeringId"
                ng-model="vm.user.GraduationEngineeringId" required>
          <option ng-repeat="engineering in vm.engineeringList | orderBy:'Description'"
                  ng-value="engineering.EngineeringId">{{engineering.Description}}
          </option>
        </select>
        <p class="help-block" ng-if="form.GraduationEngineeringId.$error.required && vm.submitted">
          Insira a sua engenharia.
        </p>
      </div>

      <div class="form-group"
           ng-if="vm.personType.Description === 'Professor' || vm.personType.Description === 'FormerStudentAndProfessor'">
        <label for="ProfessorSEId">SEÇÃO DE ENSINO ATUAL*</label>
        <select class="form-control" id="ProfessorSEId" name="ProfessorSEId"
                ng-model="vm.user.ProfessorSEId" required>
          <option ng-repeat="se in vm.sesList" ng-value="se.SEId">{{se.Description}}
          </option>
        </select>
        <p class="help-block" ng-if="form.ProfessorSEId.$error.required && vm.submitted">
          Insira a sua seção de ensino.
        </p>
      </div>

      <div class="form-group">
        <label>{{vm.personType.Description === 'FormerStudent' ? 'TEVE ' : 'TEM (OU TEVE)'}}
          LIGAÇÃO COM ALGUMA INICIATIVA OU PROJETO?</label>
        <div class="custom-control custom-checkbox" ng-repeat="initiative in vm.initiativeList">
          <input type="checkbox" class="custom-control-input" id="customCheck{{$index}}" ng-model="initiative.selected">
          <label class="custom-control-label" for="customCheck{{$index}}">{{initiative.Description}}</label>
          <div class="form-group"
               ng-if="initiative.Description === 'Outros' && vm.userHasInitiative(initiative.InitiativeId)">
            <input type="text" id="InitiativeLinkOther" name="InitiativeLinkOther"
                   class="form-control"
                   ng-model="vm.user.InitiativeLinkOther" required>
            <p class="help-block"
               ng-show="form.InitiativeLinkOther.$error.required && vm.submittedUpdate">
              Insira outra opção.
            </p>
          </div>
        </div>
      </div>

    </div>

    <!-- Professional information - Only for users whose provider is local -->
    <div class="page3" ng-if="vm.page >= 3" ng-show="vm.page === 3">

      <div class="form-group">
        <label for="Headline">TÍTULO DO PERFIL*</label>
        <textarea type="text" id="Headline" name="Headline" class="form-control" rows="3"
                  ng-model="vm.user.Headline" required ng-maxlength="255"></textarea>
        <p class="help-block" ng-show="form.Headline.$error.required && vm.submitted">
          Insira um título para seu perfil.
        </p>
        <p class="help-block" ng-show="form.Abstract.$error.maxlength">
          Título muito longo.
        </p>
      </div>

      <div class="form-group">
        <label for="Summary">RESUMO*</label>
        <textarea type="text" id="Summary" name="Summary" class="form-control" rows="6"
                  ng-model="vm.user.Summary" required></textarea>
        <p class="help-block" ng-show="form.Summary.$error.required && vm.submitted">
          Insira um resumo para seu perfil.
        </p>
      </div>

      <div class="form-group">
        <label for="Specialties">COMPETÊNCIAS*</label>
        <textarea type="text" id="Specialties" name="Specialties" class="form-control" rows="6"
                  ng-model="vm.user.Specialties" required></textarea>
        <p class="help-block" ng-show="form.Specialties.$error.required && vm.submitted">
          Insira um resumo para seu perfil.
        </p>
      </div>

      <!-- Campos: título, resumo, cargo atual [título do cargo, resumo, localização, data de início e data de término, empresa (nome, tipo, setor, tamanho)],
      país, estado, cidade, competências, setor, url do perfil externo  -->

    </div>

    <!-- Options to know the page -->
    <div class="page4" ng-if="vm.page === 4 && vm.personType.Description === 'Visitor'">

      <div class="form-group"
           ng-if="vm.personType.Description === 'Visitor'">
        <div class="custom-control custom-radio" ng-repeat="option in vm.optionsToKnowList">
          <input type="radio" id="customRadio{{$index}}" name="OptionToKnowThePage" class="custom-control-input"
                 ng-value="option.OptionTypeId" ng-model="vm.user.OptionToKnowThePageId" required>
          <label class="custom-control-label" for="customRadio{{$index}}">{{option.Description}}</label>
          <div class="form-group"
               ng-if="option.Description === 'Outros' && vm.user.OptionToKnowThePageId == option.OptionTypeId">
            <input type="text" id="OptionToKnowThePageOther" name="OptionToKnowThePageOther" class="form-control"
                   ng-model="vm.user.OptionToKnowThePageOther" required>
            <p class="help-block" ng-show="form.OptionToKnowThePageOther.$error.required && vm.submitted">
              Insira outra opção.
            </p>
          </div>
        </div>
        <p class="help-block" ng-show="form.OptionToKnowThePage.$error.required && vm.submitted">
          Escolha uma opção.
        </p>
      </div>

    </div>

    <div class="form-group has-error">
      <p class="help-block">{{ vm.errors.register }}</p>
    </div>

  </form>

  <!-- General information -->
  <div ng-show="vm.page === 1">
    <h6 class="modal-title text-center">Como você se encontra hoje:</h6>

    <button class="btn btn-outline-dark person-type" ng-repeat="type in vm.personTypes"
            ng-if="type.Description !== 'NewUser'" ng-class="{selected: type.selected}"
            ng-click="vm.selectType(type)">
      {{type.PortugueseDescription | uppercase}}
    </button>

    <p class="help-block" ng-show="form.PersonTypeId.$error.required && vm.submitted">
      Escolha uma opção.
    </p>

  </div>

  <!-- Links footer -->
  <div class="row footer-links"
       ng-class="{'justify-content-end': vm.page === 1, 'justify-content-between': vm.page >= 2}">
    <button class="btn btn-link text-dark" ng-if="vm.page >= 2" ng-click="vm.backPage()">
      VOLTAR
    </button>
    <button class="btn btn-link text-dark" ng-if="vm.page <= 2 || vm.page === 3 && vm.personType.Description === 'Visitor'"
            ng-click="vm.nextPage(form)">
      AVANÇAR
    </button>
    <button class="btn btn-link text-dark" ng-if="vm.page === 4 || vm.page === 3 && vm.personType.Description !== 'Visitor'"
            ng-click="vm.registerNewUser(form)">
      FINALIZAR
    </button>
  </div>

</div>
